import{b as j,i as Ie,d as E,a as Ae,H as Ne,y as fe,I as Ve,c as Ee,m as pe,z as ze,_ as Z,E as z,J as ie,j as me,u as X,e as ue,K as Me,L as Se,M as je,N as Te,t as de,q as Pe,p as oe,O as qe,P as He,Q as Ke,R as We,S as Ge}from"./base-295e6725.js";import{U as Ue,c as Xe,d as De,e as se,f as Je,E as ae,a as Qe,b as Ze}from"./el-input-c1d1c214.js";import{b as Ye,a as xe,E as et}from"./el-form-item-aaab0f09.js";/* empty css                */import{E as tt,a as st}from"./el-checkbox-e51c4648.js";import{f as at,h as ot}from"./doc-a460a9ac.js";import{a as M,m as P,I as ee,Q as lt,j as nt,N as rt,d as I,z as te,o as g,n as B,e as $,w as C,B as it,A as O,v as le,V as J,q as h,c as S,h as D,t as Q,s as _,M as ut,T as dt,a0 as ct,_ as ft,L as ve,b as t,U as G,G as pt,a1 as R,F as mt,E as vt,W as Fe,a2 as yt,a3 as gt,i as ht,$ as ne,P as ye,a4 as bt,k as kt,p as wt,R as $t,a5 as ge,r as he,a6 as Ct,g as be,f as _t}from"./index-8e5c6ca0.js";import{i as Et}from"./scroll-c996a468.js";import{u as St,E as Tt}from"./index-bb5a5ed8.js";import{f as Pt}from"./el-popper-5757448a.js";var Ut=1,Dt=4;function ke(e){return Ye(e,Ut|Dt)}const Ft=j({center:{type:Boolean,default:!1},alignCenter:{type:Boolean,default:!1},closeIcon:{type:Ie},customClass:{type:String,default:""},draggable:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},showClose:{type:Boolean,default:!0},title:{type:String,default:""}}),Lt=j({...Ft,appendToBody:{type:Boolean,default:!1},beforeClose:{type:E(Function)},destroyOnClose:{type:Boolean,default:!1},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:{type:Boolean,default:!1},modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1}}),Rt={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[Ue]:e=>Ae(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},Bt=(e,s)=>{const a=rt().emit,{nextZIndex:v}=Ne();let p="";const y=fe(),c=fe(),b=M(!1),f=M(!1),w=M(!1),k=M(e.zIndex||v());let n,d;const l=Xe("namespace",Ve),u=P(()=>{const N={},W=`--${l.value}-dialog`;return e.fullscreen||(e.top&&(N[`${W}-margin-top`]=e.top),e.width&&(N[`${W}-width`]=Ee(e.width))),N}),m=P(()=>e.alignCenter?{display:"flex"}:{});function i(){a("opened")}function U(){a("closed"),a(Ue,!1),e.destroyOnClose&&(w.value=!1)}function r(){a("close")}function F(){d==null||d(),n==null||n(),e.openDelay&&e.openDelay>0?{stop:n}=pe(()=>q(),e.openDelay):q()}function L(){n==null||n(),d==null||d(),e.closeDelay&&e.closeDelay>0?{stop:d}=pe(()=>H(),e.closeDelay):H()}function T(){function N(W){W||(f.value=!0,b.value=!1)}e.beforeClose?e.beforeClose(N):L()}function A(){e.closeOnClickModal&&T()}function q(){ze&&(b.value=!0)}function H(){b.value=!1}function V(){a("openAutoFocus")}function Y(){a("closeAutoFocus")}function x(N){var W;((W=N.detail)==null?void 0:W.focusReason)==="pointer"&&N.preventDefault()}e.lockScroll&&St(b);function K(){e.closeOnPressEscape&&T()}return ee(()=>e.modelValue,N=>{N?(f.value=!1,F(),w.value=!0,k.value=e.zIndex?k.value++:v(),lt(()=>{a("open"),s.value&&(s.value.scrollTop=0)})):b.value&&L()}),ee(()=>e.fullscreen,N=>{s.value&&(N?(p=s.value.style.transform,s.value.style.transform=""):s.value.style.transform=p)}),nt(()=>{e.modelValue&&(b.value=!0,w.value=!0,F())}),{afterEnter:i,afterLeave:U,beforeLeave:r,handleClose:T,onModalClick:A,close:L,doClose:H,onOpenAutoFocus:V,onCloseAutoFocus:Y,onCloseRequested:K,onFocusoutPrevented:x,titleId:y,bodyId:c,closed:f,style:u,overlayDialogStyle:m,rendered:w,visible:b,zIndex:k}},Ot=j({...Lt,direction:{type:String,default:"rtl",values:["ltr","rtl","ttb","btt"]},size:{type:[String,Number],default:"30%"},withHeader:{type:Boolean,default:!0},modalFade:{type:Boolean,default:!0}}),It=Rt,At=I({name:"ElDrawer",components:{ElOverlay:Tt,ElFocusTrap:Pt,ElIcon:z,Close:ie},inheritAttrs:!1,props:Ot,emits:It,setup(e,{slots:s}){me({scope:"el-drawer",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/drawer.html#slots"},P(()=>!!s.title)),me({scope:"el-drawer",from:"custom-class",replacement:"class",version:"2.3.0",ref:"https://element-plus.org/en-US/component/drawer.html#attributes",type:"Attribute"},P(()=>!!e.customClass));const o=M(),a=M(),v=X("drawer"),{t:p}=De(),y=P(()=>e.direction==="rtl"||e.direction==="ltr"),c=P(()=>Ee(e.size));return{...Bt(e,o),drawerRef:o,focusStartRef:a,isHorizontal:y,drawerSize:c,ns:v,t:p}}}),Nt=["aria-label","aria-labelledby","aria-describedby"],Vt=["id"],zt=["aria-label"],Mt=["id"];function jt(e,s,o,a,v,p){const y=te("close"),c=te("el-icon"),b=te("el-focus-trap"),f=te("el-overlay");return g(),B(ct,{to:"body",disabled:!e.appendToBody},[$(dt,{name:e.ns.b("fade"),onAfterEnter:e.afterEnter,onAfterLeave:e.afterLeave,onBeforeLeave:e.beforeLeave,persisted:""},{default:C(()=>[it($(f,{mask:e.modal,"overlay-class":e.modalClass,"z-index":e.zIndex,onClick:e.onModalClick},{default:C(()=>[$(b,{loop:"",trapped:e.visible,"focus-trap-el":e.drawerRef,"focus-start-el":e.focusStartRef,onReleaseRequested:e.onCloseRequested},{default:C(()=>[O("div",le({ref:"drawerRef","aria-modal":"true","aria-label":e.title||void 0,"aria-labelledby":e.title?void 0:e.titleId,"aria-describedby":e.bodyId},e.$attrs,{class:[e.ns.b(),e.direction,e.visible&&"open",e.customClass],style:e.isHorizontal?"width: "+e.drawerSize:"height: "+e.drawerSize,role:"dialog",onClick:s[1]||(s[1]=J(()=>{},["stop"]))}),[O("span",{ref:"focusStartRef",class:h(e.ns.e("sr-focus")),tabindex:"-1"},null,2),e.withHeader?(g(),S("header",{key:0,class:h(e.ns.e("header"))},[e.$slots.title?D(e.$slots,"title",{key:1},()=>[_(" DEPRECATED SLOT ")]):D(e.$slots,"header",{key:0,close:e.handleClose,titleId:e.titleId,titleClass:e.ns.e("title")},()=>[e.$slots.title?_("v-if",!0):(g(),S("span",{key:0,id:e.titleId,role:"heading",class:h(e.ns.e("title"))},Q(e.title),11,Vt))]),e.showClose?(g(),S("button",{key:2,"aria-label":e.t("el.drawer.close"),class:h(e.ns.e("close-btn")),type:"button",onClick:s[0]||(s[0]=(...w)=>e.handleClose&&e.handleClose(...w))},[$(c,{class:h(e.ns.e("close"))},{default:C(()=>[$(y)]),_:1},8,["class"])],10,zt)):_("v-if",!0)],2)):_("v-if",!0),e.rendered?(g(),S("div",{key:1,id:e.bodyId,class:h(e.ns.e("body"))},[D(e.$slots,"default")],10,Mt)):_("v-if",!0),e.$slots.footer?(g(),S("div",{key:2,class:h(e.ns.e("footer"))},[D(e.$slots,"footer")],2)):_("v-if",!0)],16,Nt)]),_:3},8,["trapped","focus-trap-el","focus-start-el","onReleaseRequested"])]),_:3},8,["mask","overlay-class","z-index","onClick"]),[[ut,e.visible]])]),_:3},8,["name","onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"])}var qt=Z(At,[["render",jt],["__file","/home/runner/work/element-plus/element-plus/packages/components/drawer/src/drawer.vue"]]);const Ht=ue(qt),Kt=j({type:{type:String,default:"line",values:["line","circle","dashboard"]},percentage:{type:Number,default:0,validator:e=>e>=0&&e<=100},status:{type:String,default:"",values:["","success","exception","warning"]},indeterminate:{type:Boolean,default:!1},duration:{type:Number,default:3},strokeWidth:{type:Number,default:6},strokeLinecap:{type:E(String),default:"round"},textInside:{type:Boolean,default:!1},width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:E([String,Array,Function]),default:""},striped:Boolean,stripedFlow:Boolean,format:{type:E(Function),default:e=>`${e}%`}}),Wt=["aria-valuenow"],Gt={viewBox:"0 0 100 100"},Xt=["d","stroke","stroke-width"],Jt=["d","stroke","opacity","stroke-linecap","stroke-width"],Qt={key:0},Zt=I({name:"ElProgress"}),Yt=I({...Zt,props:Kt,setup(e){const s=e,o={success:"#13ce66",exception:"#ff4949",warning:"#e6a23c",default:"#20a0ff"},a=X("progress"),v=P(()=>({width:`${s.percentage}%`,animationDuration:`${s.duration}s`,backgroundColor:U(s.percentage)})),p=P(()=>(s.strokeWidth/s.width*100).toFixed(1)),y=P(()=>["circle","dashboard"].includes(s.type)?Number.parseInt(`${50-Number.parseFloat(p.value)/2}`,10):0),c=P(()=>{const r=y.value,F=s.type==="dashboard";return`
          M 50 50
          m 0 ${F?"":"-"}${r}
          a ${r} ${r} 0 1 1 0 ${F?"-":""}${r*2}
          a ${r} ${r} 0 1 1 0 ${F?"":"-"}${r*2}
          `}),b=P(()=>2*Math.PI*y.value),f=P(()=>s.type==="dashboard"?.75:1),w=P(()=>`${-1*b.value*(1-f.value)/2}px`),k=P(()=>({strokeDasharray:`${b.value*f.value}px, ${b.value}px`,strokeDashoffset:w.value})),n=P(()=>({strokeDasharray:`${b.value*f.value*(s.percentage/100)}px, ${b.value}px`,strokeDashoffset:w.value,transition:"stroke-dasharray 0.6s ease 0s, stroke 0.6s ease, opacity ease 0.6s"})),d=P(()=>{let r;return s.color?r=U(s.percentage):r=o[s.status]||o.default,r}),l=P(()=>s.status==="warning"?Me:s.type==="line"?s.status==="success"?Se:je:s.status==="success"?Te:ie),u=P(()=>s.type==="line"?12+s.strokeWidth*.4:s.width*.111111+2),m=P(()=>s.format(s.percentage));function i(r){const F=100/r.length;return r.map((T,A)=>ve(T)?{color:T,percentage:(A+1)*F}:T).sort((T,A)=>T.percentage-A.percentage)}const U=r=>{var F;const{color:L}=s;if(ft(L))return L(r);if(ve(L))return L;{const T=i(L);for(const A of T)if(A.percentage>r)return A.color;return(F=T[T.length-1])==null?void 0:F.color}};return(r,F)=>(g(),S("div",{class:h([t(a).b(),t(a).m(r.type),t(a).is(r.status),{[t(a).m("without-text")]:!r.showText,[t(a).m("text-inside")]:r.textInside}]),role:"progressbar","aria-valuenow":r.percentage,"aria-valuemin":"0","aria-valuemax":"100"},[r.type==="line"?(g(),S("div",{key:0,class:h(t(a).b("bar"))},[O("div",{class:h(t(a).be("bar","outer")),style:G({height:`${r.strokeWidth}px`})},[O("div",{class:h([t(a).be("bar","inner"),{[t(a).bem("bar","inner","indeterminate")]:r.indeterminate},{[t(a).bem("bar","inner","striped")]:r.striped},{[t(a).bem("bar","inner","striped-flow")]:r.stripedFlow}]),style:G(t(v))},[(r.showText||r.$slots.default)&&r.textInside?(g(),S("div",{key:0,class:h(t(a).be("bar","innerText"))},[D(r.$slots,"default",{percentage:r.percentage},()=>[O("span",null,Q(t(m)),1)])],2)):_("v-if",!0)],6)],6)],2)):(g(),S("div",{key:1,class:h(t(a).b("circle")),style:G({height:`${r.width}px`,width:`${r.width}px`})},[(g(),S("svg",Gt,[O("path",{class:h(t(a).be("circle","track")),d:t(c),stroke:`var(${t(a).cssVarName("fill-color-light")}, #e5e9f2)`,"stroke-width":t(p),fill:"none",style:G(t(k))},null,14,Xt),O("path",{class:h(t(a).be("circle","path")),d:t(c),stroke:t(d),fill:"none",opacity:r.percentage?1:0,"stroke-linecap":r.strokeLinecap,"stroke-width":t(p),style:G(t(n))},null,14,Jt)]))],6)),(r.showText||r.$slots.default)&&!r.textInside?(g(),S("div",{key:2,class:h(t(a).e("text")),style:G({fontSize:`${t(u)}px`})},[D(r.$slots,"default",{percentage:r.percentage},()=>[r.status?(g(),B(t(z),{key:1},{default:C(()=>[(g(),B(pt(t(l))))]),_:1})):(g(),S("span",Qt,Q(t(m)),1))])],6)):_("v-if",!0)],10,Wt))}});var xt=Z(Yt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/progress/src/progress.vue"]]);const es=ue(xt),Le=Symbol("uploadContextKey"),ts="ElUpload";class ss extends Error{constructor(s,o,a,v){super(s),this.name="UploadAjaxError",this.status=o,this.method=a,this.url=v}}function we(e,s,o){let a;return o.response?a=`${o.response.error||o.response}`:o.responseText?a=`${o.responseText}`:a=`fail to ${s.method} ${e} ${o.status}`,new ss(a,o.status,s.method,e)}function as(e){const s=e.responseText||e.response;if(!s)return s;try{return JSON.parse(s)}catch{return s}}const os=e=>{typeof XMLHttpRequest>"u"&&de(ts,"XMLHttpRequest is undefined");const s=new XMLHttpRequest,o=e.action;s.upload&&s.upload.addEventListener("progress",p=>{const y=p;y.percent=p.total>0?p.loaded/p.total*100:0,e.onProgress(y)});const a=new FormData;if(e.data)for(const[p,y]of Object.entries(e.data))Array.isArray(y)?a.append(p,...y):a.append(p,y);a.append(e.filename,e.file,e.file.name),s.addEventListener("error",()=>{e.onError(we(o,e,s))}),s.addEventListener("load",()=>{if(s.status<200||s.status>=300)return e.onError(we(o,e,s));e.onSuccess(as(s))}),s.open(e.method,o,!0),e.withCredentials&&"withCredentials"in s&&(s.withCredentials=!0);const v=e.headers||{};if(v instanceof Headers)v.forEach((p,y)=>s.setRequestHeader(y,p));else for(const[p,y]of Object.entries(v))Pe(y)||s.setRequestHeader(p,String(y));return s.send(a),s},Re=["text","picture","picture-card"];let ls=1;const re=()=>Date.now()+ls++,Be=j({action:{type:String,default:"#"},headers:{type:E(Object)},method:{type:String,default:"post"},data:{type:Object,default:()=>oe({})},multiple:{type:Boolean,default:!1},name:{type:String,default:"file"},drag:{type:Boolean,default:!1},withCredentials:Boolean,showFileList:{type:Boolean,default:!0},accept:{type:String,default:""},type:{type:String,default:"select"},fileList:{type:E(Array),default:()=>oe([])},autoUpload:{type:Boolean,default:!0},listType:{type:String,values:Re,default:"text"},httpRequest:{type:E(Function),default:os},disabled:Boolean,limit:Number}),ns=j({...Be,beforeUpload:{type:E(Function),default:R},beforeRemove:{type:E(Function)},onRemove:{type:E(Function),default:R},onChange:{type:E(Function),default:R},onPreview:{type:E(Function),default:R},onSuccess:{type:E(Function),default:R},onProgress:{type:E(Function),default:R},onError:{type:E(Function),default:R},onExceed:{type:E(Function),default:R}}),rs=j({files:{type:E(Array),default:()=>oe([])},disabled:{type:Boolean,default:!1},handlePreview:{type:E(Function),default:R},listType:{type:String,values:Re,default:"text"}}),is={remove:e=>!!e},us=["onKeydown"],ds=["src"],cs=["onClick"],fs=["title"],ps=["onClick"],ms=["onClick"],vs=I({name:"ElUploadList"}),ys=I({...vs,props:rs,emits:is,setup(e,{emit:s}){const{t:o}=De(),a=X("upload"),v=X("icon"),p=X("list"),y=se(),c=M(!1),b=f=>{s("remove",f)};return(f,w)=>(g(),B(yt,{tag:"ul",class:h([t(a).b("list"),t(a).bm("list",f.listType),t(a).is("disabled",t(y))]),name:t(p).b()},{default:C(()=>[(g(!0),S(mt,null,vt(f.files,k=>(g(),S("li",{key:k.uid||k.name,class:h([t(a).be("list","item"),t(a).is(k.status),{focusing:c.value}]),tabindex:"0",onKeydown:Fe(n=>!t(y)&&b(k),["delete"]),onFocus:w[0]||(w[0]=n=>c.value=!0),onBlur:w[1]||(w[1]=n=>c.value=!1),onClick:w[2]||(w[2]=n=>c.value=!1)},[D(f.$slots,"default",{file:k},()=>[f.listType==="picture"||k.status!=="uploading"&&f.listType==="picture-card"?(g(),S("img",{key:0,class:h(t(a).be("list","item-thumbnail")),src:k.url,alt:""},null,10,ds)):_("v-if",!0),k.status==="uploading"||f.listType!=="picture-card"?(g(),S("div",{key:1,class:h(t(a).be("list","item-info"))},[O("a",{class:h(t(a).be("list","item-name")),onClick:J(n=>f.handlePreview(k),["prevent"])},[$(t(z),{class:h(t(v).m("document"))},{default:C(()=>[$(t(qe))]),_:1},8,["class"]),O("span",{class:h(t(a).be("list","item-file-name")),title:k.name},Q(k.name),11,fs)],10,cs),k.status==="uploading"?(g(),B(t(es),{key:0,type:f.listType==="picture-card"?"circle":"line","stroke-width":f.listType==="picture-card"?6:2,percentage:Number(k.percentage),style:G(f.listType==="picture-card"?"":"margin-top: 0.5rem")},null,8,["type","stroke-width","percentage","style"])):_("v-if",!0)],2)):_("v-if",!0),O("label",{class:h(t(a).be("list","item-status-label"))},[f.listType==="text"?(g(),B(t(z),{key:0,class:h([t(v).m("upload-success"),t(v).m("circle-check")])},{default:C(()=>[$(t(Se))]),_:1},8,["class"])):["picture-card","picture"].includes(f.listType)?(g(),B(t(z),{key:1,class:h([t(v).m("upload-success"),t(v).m("check")])},{default:C(()=>[$(t(Te))]),_:1},8,["class"])):_("v-if",!0)],2),t(y)?_("v-if",!0):(g(),B(t(z),{key:2,class:h(t(v).m("close")),onClick:n=>b(k)},{default:C(()=>[$(t(ie))]),_:2},1032,["class","onClick"])),_(" Due to close btn only appears when li gets focused disappears after li gets blurred, thus keyboard navigation can never reach close btn"),_(" This is a bug which needs to be fixed "),_(" TODO: Fix the incorrect navigation interaction "),t(y)?_("v-if",!0):(g(),S("i",{key:3,class:h(t(v).m("close-tip"))},Q(t(o)("el.upload.deleteTip")),3)),f.listType==="picture-card"?(g(),S("span",{key:4,class:h(t(a).be("list","item-actions"))},[O("span",{class:h(t(a).be("list","item-preview")),onClick:n=>f.handlePreview(k)},[$(t(z),{class:h(t(v).m("zoom-in"))},{default:C(()=>[$(t(He))]),_:1},8,["class"])],10,ps),t(y)?_("v-if",!0):(g(),S("span",{key:0,class:h(t(a).be("list","item-delete")),onClick:n=>b(k)},[$(t(z),{class:h(t(v).m("delete"))},{default:C(()=>[$(t(Ke))]),_:1},8,["class"])],10,ms))],2)):_("v-if",!0)])],42,us))),128)),D(f.$slots,"append")]),_:3},8,["class","name"]))}});var $e=Z(ys,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload-list.vue"]]);const gs=j({disabled:{type:Boolean,default:!1}}),hs={file:e=>gt(e)},bs=["onDrop","onDragover"],Oe="ElUploadDrag",ks=I({name:Oe}),ws=I({...ks,props:gs,emits:hs,setup(e,{emit:s}){const o=ht(Le);o||de(Oe,"usage: <el-upload><el-upload-dragger /></el-upload>");const a=X("upload"),v=M(!1),p=se(),y=b=>{if(p.value)return;v.value=!1,b.stopPropagation();const f=Array.from(b.dataTransfer.files),w=o.accept.value;if(!w){s("file",f);return}const k=f.filter(n=>{const{type:d,name:l}=n,u=l.includes(".")?`.${l.split(".").pop()}`:"",m=d.replace(/\/.*$/,"");return w.split(",").map(i=>i.trim()).filter(i=>i).some(i=>i.startsWith(".")?u===i:/\/\*$/.test(i)?m===i.replace(/\/\*$/,""):/^[^/]+\/[^/]+$/.test(i)?d===i:!1)});s("file",k)},c=()=>{p.value||(v.value=!0)};return(b,f)=>(g(),S("div",{class:h([t(a).b("dragger"),t(a).is("dragover",v.value)]),onDrop:J(y,["prevent"]),onDragover:J(c,["prevent"]),onDragleave:f[0]||(f[0]=J(w=>v.value=!1,["prevent"]))},[D(b.$slots,"default")],42,bs))}});var $s=Z(ws,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload-dragger.vue"]]);const Cs=j({...Be,beforeUpload:{type:E(Function),default:R},onRemove:{type:E(Function),default:R},onStart:{type:E(Function),default:R},onSuccess:{type:E(Function),default:R},onProgress:{type:E(Function),default:R},onError:{type:E(Function),default:R},onExceed:{type:E(Function),default:R}}),_s=["onKeydown"],Es=["name","multiple","accept"],Ss=I({name:"ElUploadContent",inheritAttrs:!1}),Ts=I({...Ss,props:Cs,setup(e,{expose:s}){const o=e,a=X("upload"),v=se(),p=ne({}),y=ne(),c=l=>{if(l.length===0)return;const{autoUpload:u,limit:m,fileList:i,multiple:U,onStart:r,onExceed:F}=o;if(m&&i.length+l.length>m){F(l,i);return}U||(l=l.slice(0,1));for(const L of l){const T=L;T.uid=re(),r(T),u&&b(T)}},b=async l=>{if(y.value.value="",!o.beforeUpload)return f(l);let u,m={};try{const U=o.data,r=o.beforeUpload(l);m=ye(o.data)?ke(o.data):o.data,u=await r,ye(o.data)&&Et(U,m)&&(m=ke(o.data))}catch{u=!1}if(u===!1){o.onRemove(l);return}let i=l;u instanceof Blob&&(u instanceof File?i=u:i=new File([u],l.name,{type:l.type})),f(Object.assign(i,{uid:l.uid}),m)},f=(l,u)=>{const{headers:m,data:i,method:U,withCredentials:r,name:F,action:L,onProgress:T,onSuccess:A,onError:q,httpRequest:H}=o,{uid:V}=l,Y={headers:m||{},withCredentials:r,file:l,data:u??i,method:U,filename:F,action:L,onProgress:K=>{T(K,l)},onSuccess:K=>{A(K,l),delete p.value[V]},onError:K=>{q(K,l),delete p.value[V]}},x=H(Y);p.value[V]=x,x instanceof Promise&&x.then(Y.onSuccess,Y.onError)},w=l=>{const u=l.target.files;u&&c(Array.from(u))},k=()=>{v.value||(y.value.value="",y.value.click())},n=()=>{k()};return s({abort:l=>{Je(p.value).filter(l?([m])=>String(l.uid)===m:()=>!0).forEach(([m,i])=>{i instanceof XMLHttpRequest&&i.abort(),delete p.value[m]})},upload:b}),(l,u)=>(g(),S("div",{class:h([t(a).b(),t(a).m(l.listType),t(a).is("drag",l.drag)]),tabindex:"0",onClick:k,onKeydown:Fe(J(n,["self"]),["enter","space"])},[l.drag?(g(),B($s,{key:0,disabled:t(v),onFile:c},{default:C(()=>[D(l.$slots,"default")]),_:3},8,["disabled"])):D(l.$slots,"default",{key:1}),O("input",{ref_key:"inputRef",ref:y,class:h(t(a).e("input")),name:l.name,multiple:l.multiple,accept:l.accept,type:"file",onChange:w,onClick:u[0]||(u[0]=J(()=>{},["stop"]))},null,42,Es)],42,_s))}});var Ce=Z(Ts,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload-content.vue"]]);const _e="ElUpload",Ps=e=>{var s;(s=e.url)!=null&&s.startsWith("blob:")&&URL.revokeObjectURL(e.url)},Us=(e,s)=>{const o=We(e,"fileList",void 0,{passive:!0}),a=n=>o.value.find(d=>d.uid===n.uid);function v(n){var d;(d=s.value)==null||d.abort(n)}function p(n=["ready","uploading","success","fail"]){o.value=o.value.filter(d=>!n.includes(d.status))}const y=(n,d)=>{const l=a(d);l&&(console.error(n),l.status="fail",o.value.splice(o.value.indexOf(l),1),e.onError(n,l,o.value),e.onChange(l,o.value))},c=(n,d)=>{const l=a(d);l&&(e.onProgress(n,l,o.value),l.status="uploading",l.percentage=Math.round(n.percent))},b=(n,d)=>{const l=a(d);l&&(l.status="success",l.response=n,e.onSuccess(n,l,o.value),e.onChange(l,o.value))},f=n=>{Pe(n.uid)&&(n.uid=re());const d={name:n.name,percentage:0,status:"ready",size:n.size,raw:n,uid:n.uid};if(e.listType==="picture-card"||e.listType==="picture")try{d.url=URL.createObjectURL(n)}catch(l){Ge(_e,l.message),e.onError(l,d,o.value)}o.value=[...o.value,d],e.onChange(d,o.value)},w=async n=>{const d=n instanceof File?a(n):n;d||de(_e,"file to be removed not found");const l=u=>{v(u);const m=o.value;m.splice(m.indexOf(u),1),e.onRemove(u,m),Ps(u)};e.beforeRemove?await e.beforeRemove(d,o.value)!==!1&&l(d):l(d)};function k(){o.value.filter(({status:n})=>n==="ready").forEach(({raw:n})=>{var d;return n&&((d=s.value)==null?void 0:d.upload(n))})}return ee(()=>e.listType,n=>{n!=="picture-card"&&n!=="picture"||(o.value=o.value.map(d=>{const{raw:l,url:u}=d;if(!u&&l)try{d.url=URL.createObjectURL(l)}catch(m){e.onError(m,d,o.value)}return d}))}),ee(o,n=>{for(const d of n)d.uid||(d.uid=re()),d.status||(d.status="success")},{immediate:!0,deep:!0}),{uploadFiles:o,abort:v,clearFiles:p,handleError:y,handleProgress:c,handleStart:f,handleSuccess:b,handleRemove:w,submit:k}},Ds=I({name:"ElUpload"}),Fs=I({...Ds,props:ns,setup(e,{expose:s}){const o=e,a=bt(),v=se(),p=ne(),{abort:y,submit:c,clearFiles:b,uploadFiles:f,handleStart:w,handleError:k,handleRemove:n,handleSuccess:d,handleProgress:l}=Us(o,p),u=P(()=>o.listType==="picture-card"),m=P(()=>({...o,fileList:f.value,onStart:w,onProgress:l,onSuccess:d,onError:k,onRemove:n}));return kt(()=>{f.value.forEach(({url:i})=>{i!=null&&i.startsWith("blob:")&&URL.revokeObjectURL(i)})}),wt(Le,{accept:$t(o,"accept")}),s({abort:y,submit:c,clearFiles:b,handleStart:w,handleRemove:n}),(i,U)=>(g(),S("div",null,[t(u)&&i.showFileList?(g(),B($e,{key:0,disabled:t(v),"list-type":i.listType,files:t(f),"handle-preview":i.onPreview,onRemove:t(n)},ge({append:C(()=>[$(Ce,le({ref_key:"uploadRef",ref:p},t(m)),{default:C(()=>[t(a).trigger?D(i.$slots,"trigger",{key:0}):_("v-if",!0),!t(a).trigger&&t(a).default?D(i.$slots,"default",{key:1}):_("v-if",!0)]),_:3},16)]),_:2},[i.$slots.file?{name:"default",fn:C(({file:r})=>[D(i.$slots,"file",{file:r})])}:void 0]),1032,["disabled","list-type","files","handle-preview","onRemove"])):_("v-if",!0),!t(u)||t(u)&&!i.showFileList?(g(),B(Ce,le({key:1,ref_key:"uploadRef",ref:p},t(m)),{default:C(()=>[t(a).trigger?D(i.$slots,"trigger",{key:0}):_("v-if",!0),!t(a).trigger&&t(a).default?D(i.$slots,"default",{key:1}):_("v-if",!0)]),_:3},16)):_("v-if",!0),i.$slots.trigger?D(i.$slots,"default",{key:2}):_("v-if",!0),D(i.$slots,"tip"),!t(u)&&i.showFileList?(g(),B($e,{key:3,disabled:t(v),"list-type":i.listType,files:t(f),"handle-preview":i.onPreview,onRemove:t(n)},ge({_:2},[i.$slots.file?{name:"default",fn:C(({file:r})=>[D(i.$slots,"file",{file:r})])}:void 0]),1032,["disabled","list-type","files","handle-preview","onRemove"])):_("v-if",!0)]))}});var Ls=Z(Fs,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload.vue"]]);const Rs=ue(Ls);var ce=I({name:"Plus"});const Bs={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},Os=$("path",{fill:"currentColor",d:"M480 480V128a32 32 0 0 1 64 0v352h352a32 32 0 1 1 0 64H544v352a32 32 0 1 1-64 0V544H128a32 32 0 0 1 0-64h352z"},null,-1);function Is(e,s,o,a,v,p){return g(),B("svg",Bs,[Os])}ce.render=Is;ce.__file="packages/components/Plus.vue";const As=ce,Ns=["src"],Vs={class:"dialog-footer"},Qs=I({__name:"drawer",props:{docType:{default:null},modelValue:{type:Boolean,default:!1}},emits:["closeDarwer","update:modelValue"],setup(e,{emit:s}){var l;const o=e,a=M(!1),v="http://localhost:3000/",p=_t(),y=he({ACCESS_TOKEN:(l=p.state.user)==null?void 0:l.token});ee(()=>o.modelValue,u=>{u&&(a.value=u,b())},{immediate:!0});const c=he({form:{name:"",contentTypes:[]},loading:!1,imageUrl:"",unploadUrl:Ct.baseUrl+"uploadTypeImg"}),b=()=>{var u,m,i;c.form.name=((u=o.docType)==null?void 0:u.name)??"",c.form.contentTypes=((m=o.docType)==null?void 0:m.contentTypes)??[],c.imageUrl=((i=o.docType)==null?void 0:i.iconUrl)??""},f=(u,m)=>{u.status&&(c.imageUrl=u.url)},w=u=>{u.type!=="image/jpg"&&u.type!=="image/jpeg"&&u.type!=="image/png"&&ae({message:"图片格式仅为jpg/jpeg/png",type:"error"})},k=()=>{var i,U;if(c.loading)return;c.loading=!0;const u={id:(i=o.docType)==null?void 0:i.id,name:c.form.name,contentTypes:c.form.contentTypes.join(","),iconUrl:c.imageUrl};((U=o.docType)!=null&&U.id?at(u):ot(u)).then(r=>{setTimeout(()=>{r.status?(s("update:modelValue",!1),s("closeDarwer",r.data),a.value=!1,ae({message:r.message,type:"success"}),d()):ae({message:r.message,type:"warning"}),c.loading=!1},400)})},n=()=>{c.loading=!1,s("update:modelValue",!1),s("closeDarwer",!1),a.value=!1},d=()=>{c.form.name="",c.form.contentTypes=[],c.imageUrl=""};return(u,m)=>{const i=Qe,U=xe,r=tt,F=st,L=z,T=Rs,A=et,q=Ze,H=Ht;return g(),B(H,{title:"添加文档类型",class:"doc-drawer",modelValue:a.value,"onUpdate:modelValue":m[2]||(m[2]=V=>a.value=V),"before-close":n,"destroy-on-close":""},{default:C(()=>[$(A,{model:c.form},{default:C(()=>[$(U,{label:"文档类型","label-width":"80px"},{default:C(()=>[$(i,{modelValue:c.form.name,"onUpdate:modelValue":m[0]||(m[0]=V=>c.form.name=V),autocomplete:"off",placeholder:"请输入文档类型"},null,8,["modelValue"])]),_:1}),$(U,{label:"内容类型","label-width":"80px"},{default:C(()=>[$(F,{modelValue:c.form.contentTypes,"onUpdate:modelValue":m[1]||(m[1]=V=>c.form.contentTypes=V)},{default:C(()=>[$(r,{label:"知识点",border:!0,value:"info"}),$(r,{label:"问答题",border:!0,value:"quetion"})]),_:1},8,["modelValue"])]),_:1}),$(U,{label:"类型图标","label-width":"80px"},{default:C(()=>[$(T,{class:"avatar-uploader",action:c.unploadUrl,"show-file-list":!1,"on-success":f,"before-upload":w,headers:y},{default:C(()=>[c.imageUrl?(g(),S("img",{key:0,src:t(v)+c.imageUrl,class:"avatar",style:{width:"100px"}},null,8,Ns)):(g(),B(L,{key:1,class:"avatar-uploader-icon",size:30,color:"#ccc"},{default:C(()=>[$(t(As))]),_:1}))]),_:1},8,["action","headers"])]),_:1})]),_:1},8,["model"]),O("div",Vs,[$(q,{onClick:n},{default:C(()=>[be("取消")]),_:1}),$(q,{type:"primary",loading:c.loading,onClick:k},{default:C(()=>[be(Q(c.loading?"提交中 ...":"确定"),1)]),_:1},8,["loading"])])]),_:1},8,["modelValue"])}}});export{Qs as _};

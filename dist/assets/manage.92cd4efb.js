import{_ as S,a as L,b as M,E as V}from"./plugin-vue_export-helper.74ec7946.js";import{x as A,y as O,z,A as J,B as G,H as P,D as R,F as D,N as q,L as H,M as K,Q}from"./el-table.a9b91e65.js";import{d as k,j as C,G as W,o as c,b as v,w as t,h as B,k as e,m as s,g as p,D as X,a9 as Y,n as b,P as F,R as U,a2 as Z}from"./vendor.15922771.js";import"./index.2c41510a.js";const ee={key:0,class:"editDoc"},oe=["src"],te={class:"dialog-footer"},ae=b("\u53D6\u6D88"),le=b("\u786E\u5B9A"),ne=k({props:{dialogVisible:null,rowData:null},emits:["closeModal"],setup(y,{emit:m}){const u=y,f="https://wanting615.com.cn/",h=C({ACCESS_TOKEN:localStorage.getItem("token")}),a=C({id:0,type:1,name:"",iconUrl:"",contentTypes:[]}),n=o=>{m("closeModal",null)},i=o=>{m("closeModal",a)},d=o=>{o.status&&(a.iconUrl=o.url)},g=o=>{o.type!=="image/jpg"&&o.type!=="image/jpeg"&&o.type!=="image/png"&&D({message:"\u56FE\u7247\u683C\u5F0F\u4EC5\u4E3Ajpg/jpeg/png",type:"error"})};return W(()=>u.rowData,o=>{!o||(a.id=o.id,a.type=o.type,a.contentTypes=JSON.parse(JSON.stringify(o.contentTypes)),a.name=o.name,a.iconUrl=o.iconUrl)}),(o,l)=>{const r=A,w=L,x=O,T=z,j=J,N=G,$=M,E=V,I=P;return c(),v(I,{modelValue:y.dialogVisible,"onUpdate:modelValue":l[2]||(l[2]=_=>Y(dialogVisible)?dialogVisible.value=_:null),title:"\u7F16\u8F91\u6587\u6863",width:"500px","before-close":n},{footer:t(()=>[B("span",te,[e(E,{onClick:n},{default:t(()=>[ae]),_:1}),e(E,{type:"primary",onClick:i},{default:t(()=>[le]),_:1})])]),default:t(()=>[s(a)?(c(),p("div",ee,[e($,{model:s(a)},{default:t(()=>[e(w,{label:"\u6587\u6863\u7C7B\u578B","label-width":"80px"},{default:t(()=>[e(r,{modelValue:s(a).name,"onUpdate:modelValue":l[0]||(l[0]=_=>s(a).name=_),autocomplete:"off",placeholder:"\u8BF7\u8F93\u5165\u6587\u6863\u7C7B\u578B"},null,8,["modelValue"])]),_:1}),e(w,{label:"\u5185\u5BB9\u7C7B\u578B","label-width":"80px"},{default:t(()=>[e(T,{modelValue:s(a).contentTypes,"onUpdate:modelValue":l[1]||(l[1]=_=>s(a).contentTypes=_)},{default:t(()=>[e(x,{label:"\u77E5\u8BC6\u70B9",border:"",value:"info"}),e(x,{label:"\u95EE\u7B54\u9898",border:"",value:"quetion"})]),_:1},8,["modelValue"])]),_:1}),e(w,{label:"\u7C7B\u578B\u56FE\u6807","label-width":"80px"},{default:t(()=>[e(N,{class:"avatar-uploader",action:s(f)+"uploadTypeImg",headers:s(h),"show-file-list":!1,"on-success":d,"before-upload":g},{default:t(()=>[s(a).iconUrl?(c(),p("img",{key:0,src:s(f)+s(a).iconUrl,class:"avatar",style:{height:"100%"}},null,8,oe)):(c(),v(j,{key:1,class:"avatar-uploader-icon",size:30,color:"#ccc"},{default:t(()=>[e(s(R))]),_:1}))]),_:1},8,["action","headers"])]),_:1})]),_:1},8,["model"])])):X("",!0)]),_:1},8,["modelValue"])}}});var se=S(ne,[["__scopeId","data-v-7ecbf60e"]]);const ue=["src"],ie={style:{"margin-left":"10px"}},ce={style:{"margin-left":"10px"}},de=b("\u7F16\u8F91"),re=b("\u5220\u9664"),ge=k({setup(y){const m="https://wanting615.com.cn/",u=C({docTypeList:[],rowData:null,rowIndex:0,dialogVisible:!1}),f=(n,i)=>{u.dialogVisible=!0,u.rowData=i,u.rowIndex=n},h=(n,i)=>{u.docTypeList.splice(n,1)};q().then(n=>{u.docTypeList=n.data});const a=n=>{n&&Q(n.id,n.name,n.contentTypes.join(","),n.iconUrl).then(i=>{i.status?(u.docTypeList[u.rowIndex]=JSON.parse(JSON.stringify(n)),u.dialogVisible=!1):D({message:i.message,type:"error"})})};return(n,i)=>{const d=H,g=V,o=K;return c(),p(F,null,[e(o,{data:s(u).docTypeList,style:{width:"100%"},"row-class-name":"table"},{default:t(()=>[e(d,{label:"\u6587\u6863\u7C7B\u578B\u56FE\u6807"},{default:t(l=>[B("img",{src:s(m)+l.row.iconUrl,width:"30"},null,8,ue)]),_:1}),e(d,{label:"\u6587\u6863\u7C7B\u578B"},{default:t(l=>[B("span",ie,U(l.row.name),1)]),_:1}),e(d,{label:"\u6587\u6863\u5B50\u7C7B\u578B"},{default:t(l=>[(c(!0),p(F,null,Z(l.row.contentTypes,r=>(c(),p("span",ce,U(r),1))),256))]),_:1}),e(d,{label:"\u64CD\u4F5C"},{default:t(l=>[e(g,{size:"small",onClick:r=>f(l.$index,l.row)},{default:t(()=>[de]),_:2},1032,["onClick"]),e(g,{size:"small",type:"danger",onClick:r=>h(l.$index,l.row)},{default:t(()=>[re]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),e(se,{dialogVisible:s(u).dialogVisible,rowData:s(u).rowData,onCloseModal:a},null,8,["dialogVisible","rowData"])],64)}}});export{ge as default};

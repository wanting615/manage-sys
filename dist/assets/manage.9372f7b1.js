import{_ as S,a as L,b as M,E as V}from"./plugin-vue_export-helper.74ec7946.js";import{x as A,y as O,z,A as J,B as G,H as P,D as R,F as D,N as q,L as H,M as K,Q}from"./el-table.b6f309c2.js";import{d as k,j as B,G as W,o as c,b as v,w as t,h as b,k as e,m as n,g as p,D as X,a9 as Y,n as y,P as F,R as U,a2 as Z}from"./vendor.15922771.js";import"./index.92a6d1b4.js";const ee={key:0,class:"editDoc"},oe=["src"],te={class:"dialog-footer"},ae=y("\u53D6\u6D88"),le=y("\u786E\u5B9A"),se=k({props:{dialogVisible:null,rowData:null},emits:["closeModal"],setup(h,{emit:m}){const u=h,f="https://wanting615.com.cn/",w=B({ACCESS_TOKEN:localStorage.getItem("token")}),a=B({id:0,type:1,name:"",iconUrl:"",contentTypes:[]}),s=o=>{m("closeModal",null)},i=o=>{m("closeModal",a)},d=o=>{o.status&&(a.iconUrl=o.url)},g=o=>{o.type!=="image/jpg"&&o.type!=="image/jpeg"&&o.type!=="image/png"&&D({message:"\u56FE\u7247\u683C\u5F0F\u4EC5\u4E3Ajpg/jpeg/png",type:"error"})};return W(()=>u.rowData,o=>{!o||(a.id=o.id,a.type=o.type,a.contentTypes=JSON.parse(JSON.stringify(o.contentTypes)),a.name=o.name,a.iconUrl=o.iconUrl)}),(o,l)=>{const r=A,C=L,x=O,T=z,j=J,N=G,$=M,E=V,I=P;return c(),v(I,{modelValue:h.dialogVisible,"onUpdate:modelValue":l[2]||(l[2]=_=>Y(dialogVisible)?dialogVisible.value=_:null),title:"\u7F16\u8F91\u6587\u6863",width:"500px","before-close":s},{footer:t(()=>[b("span",te,[e(E,{onClick:s},{default:t(()=>[ae]),_:1}),e(E,{type:"primary",onClick:i},{default:t(()=>[le]),_:1})])]),default:t(()=>[n(a)?(c(),p("div",ee,[e($,{model:n(a)},{default:t(()=>[e(C,{label:"\u6587\u6863\u7C7B\u578B","label-width":"80px"},{default:t(()=>[e(r,{modelValue:n(a).name,"onUpdate:modelValue":l[0]||(l[0]=_=>n(a).name=_),autocomplete:"off",placeholder:"\u8BF7\u8F93\u5165\u6587\u6863\u7C7B\u578B"},null,8,["modelValue"])]),_:1}),e(C,{label:"\u5185\u5BB9\u7C7B\u578B","label-width":"80px"},{default:t(()=>[e(T,{modelValue:n(a).contentTypes,"onUpdate:modelValue":l[1]||(l[1]=_=>n(a).contentTypes=_)},{default:t(()=>[e(x,{label:"\u77E5\u8BC6\u70B9",border:"",value:"info"}),e(x,{label:"\u95EE\u7B54\u9898",border:"",value:"quetion"})]),_:1},8,["modelValue"])]),_:1}),e(C,{label:"\u7C7B\u578B\u56FE\u6807","label-width":"80px"},{default:t(()=>[e(N,{class:"avatar-uploader",action:n(f)+"uploadTypeImg",headers:n(w),"show-file-list":!1,"on-success":d,"before-upload":g},{default:t(()=>[n(a).iconUrl?(c(),p("img",{key:0,src:n(f)+n(a).iconUrl,class:"avatar",style:{width:"100px"}},null,8,oe)):(c(),v(j,{key:1,class:"avatar-uploader-icon",size:30,color:"#ccc"},{default:t(()=>[e(n(R))]),_:1}))]),_:1},8,["action","headers"])]),_:1})]),_:1},8,["model"])])):X("",!0)]),_:1},8,["modelValue"])}}});var ne=S(se,[["__scopeId","data-v-9f13efe6"]]);const ue={class:"manage"},ie=["src"],ce={style:{"margin-left":"10px"}},de={style:{"margin-left":"10px"}},re=y("\u7F16\u8F91"),_e=y("\u5220\u9664"),be=k({setup(h){const m="https://wanting615.com.cn/",u=B({docTypeList:[],rowData:null,rowIndex:0,dialogVisible:!1}),f=(s,i)=>{u.dialogVisible=!0,u.rowData=i,u.rowIndex=s},w=(s,i)=>{u.docTypeList.splice(s,1)};q().then(s=>{u.docTypeList=s.data});const a=s=>{s&&Q(s.id,s.name,s.contentTypes.join(","),s.iconUrl).then(i=>{i.status?(u.docTypeList[u.rowIndex]=JSON.parse(JSON.stringify(s)),u.dialogVisible=!1):D({message:i.message,type:"error"})})};return(s,i)=>{const d=H,g=V,o=K;return c(),p(F,null,[b("div",ue,[e(o,{data:n(u).docTypeList,style:{width:"100%"},"row-class-name":"table"},{default:t(()=>[e(d,{label:"\u6587\u6863\u7C7B\u578B\u56FE\u6807"},{default:t(l=>[b("img",{src:n(m)+l.row.iconUrl,width:"30"},null,8,ie)]),_:1}),e(d,{label:"\u6587\u6863\u7C7B\u578B"},{default:t(l=>[b("span",ce,U(l.row.name),1)]),_:1}),e(d,{label:"\u6587\u6863\u5B50\u7C7B\u578B"},{default:t(l=>[(c(!0),p(F,null,Z(l.row.contentTypes,r=>(c(),p("span",de,U(r),1))),256))]),_:1}),e(d,{label:"\u64CD\u4F5C"},{default:t(l=>[e(g,{size:"small",class:"edit",onClick:r=>f(l.$index,l.row)},{default:t(()=>[re]),_:2},1032,["onClick"]),e(g,{size:"small",type:"danger",onClick:r=>w(l.$index,l.row)},{default:t(()=>[_e]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),e(ne,{dialogVisible:n(u).dialogVisible,rowData:n(u).rowData,onCloseModal:a},null,8,["dialogVisible","rowData"])],64)}}});export{be as default};
